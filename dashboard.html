<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Dashboard • KIMHUBFX</title>
<link rel="stylesheet" href="style.css">
<style>
/* Make horizontal menu scrollable on small screens */
.horizontal-menu {
  display: flex;
  overflow-x: auto;
  white-space: nowrap;
  background: #fff;
  border-bottom: 1px solid #ccc;
}

.menu-item {
  flex: 0 0 auto;
  padding: 12px 16px;
  font-weight: bold;
  cursor: pointer;
  white-space: nowrap;
}

.menu-item:hover {
  background: #f0f0f0;
}

.menu-item.active {
  text-decoration: underline;
}

/* Optional: style cards for dashboard */
.card {
  background: #fff;
  padding: 16px;
  margin: 8px;
  border-radius: 6px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}
.center-box {
  text-align: center;
}
.muted {
  color: #666;
}
</style>
</head>
<body>

<header class="topbar">
  <div class="left">
    <button class="icon-btn" onclick="appUI.openMenu()">☰</button>
    <span class="logo">KIMHUBFX</span>
  </div>
  <div id="authContainer" class="right"></div>
</header>

<!-- Updated horizontal menu with referral links -->
<nav class="horizontal-menu">
  <div class="menu-item" onclick="location.href='dashboard.html'">Dashboard</div>
  <div class="menu-item" onclick="location.href='dashboard.html?tool=botbuilder&ref=https://deriv.partners/rx?ca=kimhuhfx.com&utm_campaign=dynamicworks&utm_medium=affiliate&utm_source=CU154142'">Bot Builder</div>
  <div class="menu-item" onclick="location.href='dashboard.html?tool=freebots&ref=https://deriv.partners/rx?ca=kimhuhfx.com&utm_campaign=dynamicworks&utm_medium=affiliate&utm_source=CU154142'">FreeBots</div>
  <div class="menu-item" onclick="location.href='dashboard.html?tool=analysis&ref=https://deriv.partners/rx?ca=kimhuhfx.com&utm_campaign=dynamicworks&utm_medium=affiliate&utm_source=CU154142'">Analysis Tool</div>
  <div class="menu-item" onclick="location.href='dashboard.html?tool=dptool&ref=https://deriv.partners/rx?ca=kimhuhfx.com&utm_campaign=dynamicworks&utm_medium=affiliate&utm_source=CU154142'">DP Tool</div>
  <div class="menu-item" onclick="location.href='dashboard.html?tool=dtrader&ref=https://deriv.partners/rx?ca=kimhuhfx.com&utm_campaign=dynamicworks&utm_medium=affiliate&utm_source=CU154142'">DTrader</div>
</nav>

<main class="container">
  <div class="card center-box">
    <h2>Account Balance</h2>
    <div id="balanceBox" style="font-weight:900;font-size:20px">—</div>
    <div style="margin-top:8px" id="accountBox">—</div>
  </div>

  <div class="card">
    <h3>R_100 Live Price</h3>
    <div id="tickBox" class="muted">—</div>
  </div>

  <div class="card">
    <h3>Event History</h3>
    <div id="history" class="muted">No events yet</div>
  </div>

  <!-- Tool content will be dynamically loaded here -->
  <div id="toolContainer" class="card" style="margin-top:12px;"></div>
</main>

<script src="menu.js"></script>
<script src="app.js"></script>
<script src="dashboard.js"></script>
<script>
document.addEventListener('DOMContentLoaded', ()=>{
  // Render login/logout buttons
  appUI.renderAuthButtons('authContainer');

  const token = localStorage.getItem('jwt');
  if(!token){
    document.getElementById('balanceBox').innerText = '—';
    document.getElementById('accountBox').innerHTML = '<a href="index.html">Login</a>';
    return;
  }

  // Example demo info
  document.getElementById('balanceBox').innerText = 'USD 0.00';
  document.getElementById('accountBox').innerText = 'Demo Account';
});
</script>
</body>
</html>